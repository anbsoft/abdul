(function($){"use strict";function initFilterable($scope,filterFn){var $filterable=$scope.find('.victim-gallery-filter');if($filterable.length){$filterable.on('click','button',function(event){event.stopPropagation();var $current=$(this);$current.parent().addClass('victim-filter-active').siblings().removeClass('victim-filter-active');filterFn($current.data('filter'));});}}
function initPopupGallery($scope,selector,hasPopup,key){if(!$.fn.magnificPopup){return;}
if(!hasPopup){$.magnificPopup.close();return;}
$scope.on('click',selector,function(event){event.stopPropagation();});$scope.find(selector).magnificPopup({key:key,type:'image',image:{titleSrc:function(item){return item.el.attr('title')?item.el.attr('title'):item.el.find('img').attr('alt');}},zoom:{enabled:true,duration:300,easing:'ease-in-out',opener:function(openerElement){return openerElement;}}});}
function initPopupMultipleGallery($scope,selector,gallery,hasPopup,key){if(!$.fn.magnificPopup){return;}
if(!hasPopup){$.magnificPopup.close();return;}
$scope.on('click',selector,function(event){event.stopPropagation();event.preventDefault();});$scope.on('click',selector,function(event){$(this).next(gallery).magnificPopup('open');});$scope.find(gallery).each(function(){$(this).magnificPopup({key:key,delegate:'a',type:'image',image:{titleSrc:function(item){return item.el.attr('title')?item.el.attr('title'):item.el.find('img').attr('alt');}},gallery:{enabled:true},zoom:{enabled:true,duration:300,easing:'ease-in-out',opener:function(openerElement){return openerElement;}}});});}
function initPopupVideo($scope,selector,hasPopup,key){if(!$.fn.magnificPopup){return;}
if(!hasPopup){$.magnificPopup.close();return;}
$scope.on('click',selector,function(event){event.stopPropagation();});$scope.find(selector).magnificPopup({key:key,type:'iframe',mainClass:"mfp-fade",overflowY:"hidden",iframe:{markup:'<div class="mfp-iframe-scaler">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe>'+'</div>',patterns:{youtube:{index:'youtube.com/',id:'v=',src:'https://www.youtube.com/embed/%id%?autoplay=1'},vimeo:{index:'vimeo.com/',id:'/',src:'https://player.vimeo.com/video/%id%?autoplay=1'},gmaps:{index:'https://maps.google.',src:'%id%&output=embed'},soundcloud:{index:'soundcloud.com/',id:function(url){return encodeURI(url)},src:'//w.soundcloud.com/player/?url=%id%&amp;auto_play=true&amp;hide_related=true&amp;show_comments=false&amp;show_user=false&amp;show_reposts=false&amp;visual=true;'}},srcAction:'iframe_src'},zoom:{enabled:true,duration:300,easing:'ease-in-out',opener:function(openerElement){return openerElement;}}});}
function mouseEnter($selector){$($selector).each(function(){$(this).on('mouseenter',function(){if($(this).find('.content-block')){$('.victim-portfolio-title-main').html($(this).find('.content-block').html());$('.victim-portfolio-title-main').addClass('visible');}
$(document).on('mousemove',function(e){$('.victim-portfolio-title-main').css({left:e.clientX-10,top:e.clientY+25});});}).on('mouseleave',function(){$('.victim-portfolio-title-main').html('');$('.victim-portfolio-title-main').removeClass('visible');});});}
var VideoPopup=function($scope){var hasPopup=true;initPopupVideo($scope,'.lightbox-image',hasPopup,'videopopup');};var BubbleHeadings=function($scope){var heading=$scope.find(".victim-bubble-border");heading.prepend("<i></i><i></i><i></i><i></i><i></i>");heading.isInViewport(function(status){if(status==="entered"){heading.addClass("in");}
else if(status==="leaved"){heading.removeClass("in");}});};var comingSoonCounter=function($scope){var $selector=$scope.find('.commingsoon-count');$selector.each(function(){var $this=$(this),data_year=$this.attr('data-year'),data_month=$this.attr('data-month'),data_day=$this.attr('data-day'),data_hour=$this.attr('data-hour'),data_minutes=$this.attr('data-minutes');$this.syotimer({year:data_year,month:data_month,day:data_day,hour:data_hour,minute:data_minutes});});};var victimImageHeading=function($scope){var mouseMove=$scope.find('.victim-image-title').attr('data-mouse');if(mouseMove=='yes'){var mouseX,mouseY;var ww=$(window).width();var wh=$(window).height();var traX,traY;$(document).mousemove(function(e){mouseX=e.pageX;mouseY=e.pageY;traX=((4*mouseX)/ 570)+40;traY=((4*mouseY)/ 570)+50;$scope.find(".victim-image-headings").css({"background-position":traX+"%"+traY+"%"});});}};var victimPerticleBg=function($scope){if($scope.hasClass('victim-particle-yes')){var id=$scope.data('id');var element_type=$scope.data('element_type');var pdata=$scope.data('victim-particle');var pdata_wrapper=$scope.find('.victim-particle-wrapper').attr('data-victim-particle');if(typeof pdata_wrapper!='undefined'&&pdata_wrapper!=''){particlesJS('victim-particle-'+id,JSON.parse(pdata_wrapper));}else{if(element_type=='column'){$scope.find('.elementor-column-wrap').prepend('<div class="victim-particle-wrapper"'+' id="victim-particle-'+id+'"></div>');}else{$scope.prepend('<div class="victim-particle-wrapper" id="victim-particle-'+id+'"></div>');}
particlesJS('victim-particle-'+id,pdata);}}};var victimJustified=function($scope){var $item=$scope.find('.victimjs-justified-gallery'),settings=$item.data('victim-settings'),hasPopup=settings.enable_popup;$item.justifiedGallery($.extend({},{rowHeight:150,lastRow:'justify',margins:10,},settings));initPopupGallery($scope,'.victim-js-popup',hasPopup,'justifiedgallery');initFilterable($scope,function(filter){$item.justifiedGallery({lastRow:(filter==='*'?settings.lastRow:'nojustify'),filter:filter});var selector=filter!=='*'?filter:'.victim-js-popup';initPopupGallery($scope,selector,hasPopup,'justifiedgallery');});};var victimSmoothBgChanger=function($scope){if($scope.hasClass('victim-smooth-bg-colors-yes')){$(window).scroll(function(){var $window=$(window),$body=$('.victim-page-builder-elementor');var element_type=$scope.data('element_type');var editor_color=$scope.find('.victim-bg-smooth-wrapper').attr('data-victim-color');var frontend_color=$scope.data('victim-color');var scrolleditor=$window.scrollTop();var scroll=$window.scrollTop()+($window.height()/ 3);if(typeof editor_color!='undefined'&&editor_color!=''){if($scope.position().top<=scrolleditor&&$scope.position().top+$scope.height()>scrolleditor){$body.css('background-color',editor_color);$body.css({transition:'background-color 1s ease'});}}else{if($scope.position().top<=scroll&&$scope.position().top+$scope.height()>scroll){$body.css('background-color',frontend_color);$body.css({transition:'background-color 1s ease'});}}}).scroll();}};$(window).on('elementor/frontend/init',function(){if(elementorFrontend.isEditMode()){var editMode=true;}
elementorFrontend.hooks.addAction('frontend/element_ready/victim-buble-headings.default',BubbleHeadings);elementorFrontend.hooks.addAction('frontend/element_ready/victim-video-popup-btn.default',VideoPopup);elementorFrontend.hooks.addAction('frontend/element_ready/victim-coming-soon-counter.default',comingSoonCounter);elementorFrontend.hooks.addAction('frontend/element_ready/victim-image-headings.default',victimImageHeading);elementorFrontend.hooks.addAction('frontend/element_ready/victim-gallery-justified.default',victimJustified);elementorFrontend.hooks.addAction('frontend/element_ready/global',victimPerticleBg);elementorFrontend.hooks.addAction('frontend/element_ready/global',victimSmoothBgChanger);var WidgetBlogGridAjax=elementorModules.frontend.handlers.Base.extend({onInit:function(){elementorModules.frontend.handlers.Base.prototype.onInit.apply(this,arguments);this.$container=this.$element.find('.victim-blog-wrapper');if(this.$container.length){this.run();}},run:function(){var self=this;var $carousel=this.$container.children('.swiper-container'),$slider_options=JSON.parse($carousel.attr('data-slider-settings')),mySwiper=new Swiper($carousel,$slider_options);}});var portfolioGrid=elementorModules.frontend.handlers.Base.extend({onInit:function(){elementorModules.frontend.handlers.Base.prototype.onInit.apply(this,arguments);var itemLayout=this.getElementSettings('portfolio_layout');if(itemLayout=='carousel'){this.$container=this.$element.find('.victim-portfolio-wrapper');this.carousel();}else{this.$container=this.$element.find('.portfolio-grid');this.run();this.runFilter();}},getLayoutMode:function(){var layout=this.getElementSettings('masonry_layout');return(layout==='even'?'masonry':layout);},getDefaultSettings:function(){return{itemSelector:'.item',percentPosition:true,layoutMode:this.getLayoutMode()};},onElementChange:function(changedProp){if(['masonry_layout','number_grids'].indexOf(changedProp)!==-1){this.run();}},runFilter:function(){var self=this;var filterElement=this.$element.find('.portolio-filters li a');filterElement.on('click',function(e){e.preventDefault();filterElement.removeClass("active");$(this).addClass("active");var selector=$(this).attr('data-filter');self.$container.isotope({filter:selector,animationOptions:{duration:750,easing:'linear',queue:false,}});});self.$container.on('arrangeComplete',function(){$("[data-animate]").scrolla({mobile:true,once:true});});if(this.getElementSettings('pagination_types')!=='load_more_ajax'){var mainContainer=self.$container;var getItem=mainContainer.find('.item');this.$element.find('.portolio-filters li').each(function(i){var getDataFilter=$(this).children('a').data("filter");if(getDataFilter!=='*'){var getCatFilter=$(this).children('a').data("filter");var element=mainContainer.find(getCatFilter).length;$(this).find('span').html(element);}});}},carousel:function(){var $carousel=this.$container.children('.swiper-container'),$slider_options=JSON.parse($carousel.attr('data-slider-settings')),mySwiper=new Swiper($carousel,$slider_options);initPopupGallery(this.$element,'.victim-js-popup',true,'portfolioimagegrid');initPopupVideo(this.$element,'.victim-js-video-popup',true,'portfoliovideogrid');initPopupMultipleGallery(this.$element,'.victim-js-gallery-popup','.portfolio-gallery-content',true,'portfoliomultiplegrid');},run:function(){var self=this;this.$container.isotope(self.getDefaultSettings());this.$container.imagesLoaded().progress(function(){self.$container.isotope('layout');});if(this.getElementSettings('pagination_types')==='load_more_ajax'){var mainContainer=this.$container;var getItem=mainContainer.find('.item');var filterElement=this.$element.find('.portolio-filters li');filterElement.each(function(i){var getDataFilter=$(this).children('a').data("filter");if(getDataFilter!=='*'){var getCatFilter=$(this).children('a').data("filter");var element=mainContainer.find(getCatFilter).length;$(this).find('span').html(element);}});if(this.$element.find('.pagination-block').length){var defaults={path:'.pagination-block a.next',append:'.item',status:'.infinite-scroll-status'},data={};var data={button:'.btn-more-works',scrollThreshold:false,history:false};$.extend(data,defaults);mainContainer.infiniteScroll(data);mainContainer.on('append.infiniteScroll',function(event,response,path,items){$(items).hide();$(items).imagesLoaded(function(){$(items).fadeIn();mainContainer.isotope('insert',items);$("[data-animate]").scrolla({mobile:true,once:true});});$('.infinite-scroll-status').hide();var count=mainContainer.find('.item').length;var getCategorySlug=mainContainer.find('.item');filterElement.each(function(i){var getDataFilter=$(this).children('a').data("filter");if(getDataFilter!=='*'){var getCatFilter=$(this).children('a').data("filter");var element=mainContainer.find(getCatFilter).length;$(this).find('span').html(element);}else{$(this).find('#all').children('span').html(count);}});});}}
initPopupGallery(this.$element,'.victim-js-popup',true,'portfolioimagegrid');initPopupVideo(this.$element,'.victim-js-video-popup',true,'portfoliovideogrid');initPopupMultipleGallery(this.$element,'.victim-js-gallery-popup','.portfolio-gallery-content',true,'portfoliomultiplegrid');}});var testimonialCarousel=elementorModules.frontend.handlers.Base.extend({onInit:function(){elementorModules.frontend.handlers.Base.prototype.onInit.apply(this,arguments);this.$container=this.$element.find('.victim-testimonial-wrapper');this.run();},run:function(){var self=this;var $carousel=this.$container.children('.swiper-container'),$slider_options=JSON.parse($carousel.attr('data-slider-settings')),mySwiper=new Swiper($carousel,$slider_options);}});var imageGrid=elementorModules.frontend.handlers.Base.extend({onInit:function(){elementorModules.frontend.handlers.Base.prototype.onInit.apply(this,arguments);this.$container=this.$element.find('.victimjs-isotope');this.run();this.runFilter();},getLayoutMode:function(){var layout=this.getElementSettings('layout');return(layout==='even'?'masonry':layout);},getDefaultSettings:function(){return{itemSelector:'.victim-image-grid-item',percentPosition:true,layoutMode:this.getLayoutMode()};},runFilter:function(){var self=this;initFilterable(this.$element,function(filter){self.$container.isotope({filter:filter});var selector=filter!=='*'?filter:'.victim-js-popup';initPopupGallery(self.$element,selector,self.getElementSettings('enable_popup'),'imagegrid');});},onElementChange:function(changedProp){if(['layout','image_height','columns','enable_popup'].indexOf(changedProp)!==-1){this.run();}},run:function(){var self=this;this.$container.isotope(self.getDefaultSettings());this.$container.imagesLoaded().progress(function(){self.$container.isotope('layout');});initPopupGallery(this.$element,'.victim-js-popup',this.getElementSettings('enable_popup'),'imagegrid');}});var VideoGalleryHandler=elementorModules.frontend.handlers.Base.extend({onInit:function(){elementorModules.frontend.handlers.Base.prototype.onInit.apply(this,arguments);this.$container=this.$element.find('.victim-video-gallery');this.run();this.inlinePlay();},getDefaultSettings:function(){return{itemSelector:'.victim-video-gallery-item-wrap',percentPosition:true,layoutMode:'fitRows'};},onElementChange:function(changedProp){if(['layout','columns','aspect_ratio'].indexOf(changedProp)!==-1){this.run();}},inlinePlay:function(){var dataAction=this.$container.data('action');var playBtn=this.$element.find('.victim-video-play');if(dataAction=='inline'){playBtn.on('click',function(e){e.preventDefault();var $iframe=$("<iframe/>"),$vid_src=$(this).data('src'),$player=$(this).find('.victim-video-player');$iframe.attr('src',$vid_src);$iframe.attr('frameborder','0');$iframe.attr('allowfullscreen','1');$iframe.attr('allow','autoplay;encrypted-media;');$player.html($iframe);});}},run:function(){var self=this;if(this.getElementSettings('layout')=='carousel'){var carousel_settings=this.$element.find('.victim-video-gallery-wrapper'),slider_options=JSON.parse(carousel_settings.attr('data-slider-settings'));this.$container.slick(slider_options);}else{var $galleryWrap=this.$container;this.$container.isotope(self.getDefaultSettings());this.$container.imagesLoaded().progress(function(){self.$container.isotope('layout');});this.$element.find('.victim-gallery-filter').on('click',function(){var $this=$(this),filterValue=$this.attr('data-filter');$this.siblings().removeClass('victim-active');$this.addClass('victim-active');$galleryWrap.isotope({filter:filterValue});});}}});var handlersClassMap={'victim-portfolio-masonry.default':portfolioGrid,'victim-blog-grids.default':WidgetBlogGridAjax,'victim-testimonial-slider.default':testimonialCarousel,};$.each(handlersClassMap,function(widgetName,handlerClass){elementorFrontend.hooks.addAction('frontend/element_ready/'+widgetName,function($scope){elementorFrontend.elementsHandler.addHandler(handlerClass,{$element:$scope});});});});})(jQuery);